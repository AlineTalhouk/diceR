<!DOCTYPE html>
<html>
<head>
  <title>testCoverage Report </title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/black-tie/jquery-ui.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
	  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><!--<script>
        $(function() {
          $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
          $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
        });
    </script>-->
    <style>
	.footer {
		padding-top: 19px;
		color: #777;
		border-top: 1px solid #e5e5e5;
	}
  .btn,
  .nav-pills>li>a,
  .ui-corner-all,
  .ui-corner-top,
  .ui-corner-left,
  .ui-corner-tl {
    border-radius: 0;
  }
  .ui-widget-header {
    border: 1px solid #aaa;
  	background: #FAA531;
  	color: #222222;
  	font-weight: bold;
  }
  .fail {
    color: #A94442;
  background-color: #F2DEDE;
  }
  .pass {
    color: #3C763D;
  background-color: #DFF0D8;
  }
    </style>
</head>
<body>
  <script>
  var tagList = ["1_91","1_94","1_112","1_115","1_129","1_132","1_135","1_162","1_185","1_198","1_201","1_273","1_286","1_302","1_311","1_314","1_341","1_351","1_364","1_385","1_388","1_424","1_427","1_451","1_454","1_459","1_462","1_496","1_499","1_504","1_535","1_540","1_575","1_578","1_627","1_630","1_652","1_657","1_685","1_688","1_705","1_739","1_744","1_773","1_776","1_805","1_834","1_843","1_862","1_865","1_885","1_902","1_932","1_945","1_948","1_951","1_977","1_995","1_998","1_1001","1_1022","1_1060","1_1063","1_1071","1_1098"];
var sumTags = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
var allTags = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];
var coverage = [[[0,65]]];
var all_coverage = [[0,65]];
var sumAllTraces = {"0":65,"1":0};
docolor = function(j, bb) {
// $("#t_" + tagList[j]).css("backgroundColor", bb ? "lightgreen" : "lightpink");
    if(bb > 0) {
        $("#t_" + tagList[j]).removeClass("fail").addClass("pass");
	} else {
        $("#t_" + tagList[j]).removeClass("pass").addClass("fail");
    }
};
pbsummed = function(j, cov) {
    pct = 100 * (cov[0] / (cov[0] + cov[1]));
    $("#progress-" + (j + 1)).progressbar({
        value: pct
    });
};
$(document).ready(function() {
    $.each(sumTags, docolor);
    $.each(all_coverage, pbsummed);
    $("#trace_all").click(function() {
        $.each(sumTags, docolor);
        $.each(all_coverage, pbsummed)
    });
    $.each(allTags, function(i, dum) {
        $("#run_" + (i + 1)).click(
            function() {
                $.each(allTags[i], docolor);
                $.each(coverage[i], function(j, cov) {
                    pct = 100 * (cov[0] / (cov[0] + cov[1]));
                    $("#progress-" + (j + 1)).progressbar({
                        value: pct
                    });
                })
            });
    });

    //This will only run if jQuery has loaded.
    $(".internet-connectivity").hide();
});
$( document ).ready(function() {
  $(".internet-connectivity").hide();
})
  </script>
  <div class="alert alert-danger internet-connectivity" role="alert"><h1><strong>Warning:</strong> An internet connection is required to load external assets.</h1></div>
  <div class="container">
  <div class="jumbotron">
    <h1>testCoverage Report <small></small></h1>
  </div>
  <h2>Summary</h2>
<!-- html table generated in R 3.2.4 by xtable 1.8-2 package -->
<!-- Mon Oct 17 10:45:56 2016 -->
<table class="table table-bordered">
<tr> <th>  </th> <th> Total # Tracepoints </th> <th> # Executed </th> <th> % Coverage </th>  </tr>
  <tr> <td align="right"> 1 </td> <td> 65 </td> <td> 0 </td> <td>   0% </td> </tr>
   </table>
<h2>testthat Tests</h2>
	<button type="button" class="btn btn-default" id="trace_all">All Tests</button>&nbsp;<button type='button' class='btn btn-default' id='run_1'>test-ConClustEnsemble.R</button>&nbsp;<h2>Resource Files</h2><div class="row">
       <div class="col-md-4">
        <ul class="nav nav-pills nav-stacked" role="tablist"><li class="active"><a role="tab" data-toggle="tab" href="#tabs-1">ConClustEnsemble.R</a><div id="progress-1" ></div></li>
</ul>
    </div> 
    <div class="col-md-8">
    <div class="tab-content"><div class="tab-pane active" id="tabs-1"><pre>#' Function to perform clustering using \code{\link{ConClust}} with all default 
#' methods using user-sepcified number of clusters and number of repetitions.
#' 
#' @param X data set with rows as samples, columns as genes
#' @param k number of clusters in the base clusterings
#' @param reps number of repetitions
#' @param method vector of clustering algorithms for performing consensus 
#'   clustering. Must be any number of the following: "nmfDiv", "nmfEucl", 
#'   "hcAEucl", "hcDianaEucl", "kmEucl", "kmSpear", "pamEucl", "pamSpear", 
#'   "apEucl", "scRbf", "gmmBIC", "biclust".
#'   
#' @return matrix of cluster ensemble
#' @author Johnson Liu
#' @importFrom stats complete.cases
#' @export
#' @examples 
#' # Generate a 489 by 10 clustering ensemble using 2 algorithms in ConClust
#' data(hgsc)
#' dat &lt;- hgsc[, -1]
#' rownames(dat) &lt;- hgsc[, 1]
#' E &lt;- ConClustEnsemble(X = t(dat), k = 4, reps = 5, method = c("hcAEucl", "kmEucl"))
<span id="t_1_64">ConClustEnsemble</span> &lt;- function(X, k, reps = 1000, method = NULL) {
  assertthat<span id="t_1_91">::</span>assert_that(<span id="t_1_94">is.matrix(X)</span>)
  assertthat<span id="t_1_112">::</span>assert_that(<span id="t_1_115">reps</span> &gt; 1)  # can't compute consensus matrix on one rep
  <span id="t_1_129">df_conClust</span> &lt;- <span id="t_1_132">data.frame(<span id="t_1_135">t(X)</span>)</span>
  colnames(df_conClust) &lt;- <span id="t_1_162">rownames(X)</span>
  rownames(df_conClust) &lt;- <span id="t_1_185">colnames(X)</span>
  <span id="t_1_198">method.list</span> &lt;- <span id="t_1_201">c("nmfDiv", "nmfEucl", "hcAEucl", "hcDianaEucl", "kmEucl",
                   "kmSpear", "pamEucl", "pamSpear", "apEucl", "scRbf",
                   "gmmBIC", "biclust")</span>
  if (<span id="t_1_273">is.null(method)</span>) {
    <span id="t_1_286">method</span> &lt;- method.list
  } else {
    <span id="t_1_302">method.input</span> &lt;- method
    <span id="t_1_311">method</span> &lt;- <span id="t_1_314">match.arg(method.input, method.list, several.ok = TRUE)</span>
    if (<span id="t_1_341">length(method)</span> &lt; <span id="t_1_351">length(method.input)</span>)
      <span id="t_1_364">stop("Not all elements in 'method' have a partial match.")</span>
  }
  <span id="t_1_385">E</span> &lt;- <span id="t_1_388">ConClust(df_conClust, k = k, reps = reps, method = method)</span>
  if (<span id="t_1_424">is.na(<span id="t_1_427">dim(E)</span>[3])</span>) {
    <span id="t_1_451">E_imputed</span> &lt;- <span id="t_1_454">array(dim = <span id="t_1_459">c(<span id="t_1_462">dim(E)</span>, 1)</span>)</span> #If E is already 2D
  } else{
    <span id="t_1_496">E_imputed</span> &lt;- <span id="t_1_499">array(dim = <span id="t_1_504">dim(E)</span>)</span> #If E is 3D
  }
  #Use k nearest neighbour to get rid of some NAs
  for (<span id="t_1_535">i</span> in 1:<span id="t_1_540">dim(E_imputed)</span>[3]) {
    E_imputed[, , i] &lt;- <span id="t_1_575">apply(<span id="t_1_578">E</span>[, , i], 2, knn_impute, data = X)</span>
  }
  #Get consensus summary
  <span id="t_1_627">E_cs</span> &lt;- <span id="t_1_630">consensus_summary(E_imputed, k = k)</span>
  for (<span id="t_1_652">i</span> in 2:<span id="t_1_657">length(E_cs)</span>) {
    E_cs[[i]]$consensus_class &lt;- <span id="t_1_685">relabel_class(<span id="t_1_688">E_cs</span>[[1]]$consensus_class,
                                               <span id="t_1_705">E_cs</span>[[i]]$consensus_class)</span>
  }
  #Relabel and flatten the layers
  for (<span id="t_1_739">i</span> in 1:<span id="t_1_744">length(E_cs)</span>) {
    E_imputed[, , i] &lt;-
      <span id="t_1_773">apply(<span id="t_1_776">E_imputed</span>[, , i], 2, relabel_class,
            cl.ref = <span id="t_1_805">E_cs</span>[[i]]$consensus_class)</span>
  }
  <span id="t_1_834">E_imputed_relabelled</span> &lt;- E_imputed
  <span id="t_1_843">flat_E</span> &lt;- E_imputed_relabelled
  dim(flat_E) &lt;- <span id="t_1_862">c(<span id="t_1_865">dim(E_imputed_relabelled)</span>[1],
                   <span id="t_1_885">dim(E_imputed_relabelled)</span>[2] * <span id="t_1_902">dim(E_imputed_relabelled)</span>[3])</span>
  #Get rid of remaining NAs with majority voting
  if (<span id="t_1_932">anyNA(flat_E)</span>) {
    <span id="t_1_945">flat_E</span> &lt;- <span id="t_1_948">t(<span id="t_1_951">apply(flat_E, 1, function(x) {
      x[which(<span id="t_1_977">is.na(x)</span>)] &lt;- <span id="t_1_995">names(<span id="t_1_998">which.max(<span id="t_1_1001">table(x)</span>)</span>)</span>
      <span id="t_1_1022">return(x)</span>
    })</span>)</span>
  }
  <span id="t_1_1060">flat_E</span>&lt;-<span id="t_1_1063">apply(flat_E,<span id="t_1_1071">c(1,2)</span>,as.numeric)</span>
  <span id="t_1_1098">return(flat_E)</span>
}</pre></div>
    </div>
    </div>
  </div>
  <div class="footer">
    <p> Generated on2016-10-17 10:45:56 by <a href="http://www.mango-solutions.com/wp/products-services/r-services/r-packages/testcoverage/">testCoverage</a>.</p>
  </div>
  </div>
</body> 
</html>
