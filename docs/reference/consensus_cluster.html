<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Consensus clustering — consensus_cluster • diceR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">diceR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/AlineTalhouk/diceR">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Consensus clustering</h1>
    </div>

    
    <p>Runs consensus clustering across subsamples of the data, clustering
algorithms, and cluster sizes.</p>
    

    <pre class="usage"><span class='fu'>consensus_cluster</span>(<span class='no'>data</span>, <span class='kw'>nk</span> <span class='kw'>=</span> <span class='fl'>2</span>:<span class='fl'>4</span>, <span class='kw'>p.item</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>reps</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>algorithms</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nmf.method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"brunet"</span>, <span class='st'>"lee"</span>),
  <span class='kw'>distance</span> <span class='kw'>=</span> <span class='st'>"euclidean"</span>, <span class='kw'>prep.data</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"none"</span>, <span class='st'>"full"</span>, <span class='st'>"sampled"</span>),
  <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"conventional"</span>, <span class='st'>"robust"</span>), <span class='kw'>min.var</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>seed.nmf</span> <span class='kw'>=</span> <span class='fl'>123456</span>, <span class='kw'>seed.data</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>save</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>file.name</span> <span class='kw'>=</span> <span class='st'>"CCOutput"</span>, <span class='kw'>time.saved</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data matrix with rows as samples and columns as variables</p></td>
    </tr>
    <tr>
      <th>nk</th>
      <td><p>number of clusters (k) requested; can specify a single integer or a
range of integers to compute multiple k</p></td>
    </tr>
    <tr>
      <th>p.item</th>
      <td><p>proportion of items to be used in subsampling within an
algorithm</p></td>
    </tr>
    <tr>
      <th>reps</th>
      <td><p>number of subsamples</p></td>
    </tr>
    <tr>
      <th>algorithms</th>
      <td><p>vector of clustering algorithms for performing consensus
clustering. Must be any number of the following: "nmf", "hc", "diana",
"km", "pam", "ap", "sc", "gmm", "block". A custom clustering algorithm can
be used.</p></td>
    </tr>
    <tr>
      <th>nmf.method</th>
      <td><p>specify NMF-based algorithms to run. By default the
"brunet" and "lee" algorithms are called. See <code><a href='http://www.rdocumentation.org/packages/NMF/topics/nmf'>nmf</a></code> for
details.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>a vector of distance functions. Defaults to "euclidean".
Other options are given in <code><a href='http://www.rdocumentation.org/packages/stats/topics/dist'>dist</a></code>. A custom distance
function can be used.</p></td>
    </tr>
    <tr>
      <th>prep.data</th>
      <td><p>Prepare the data on the "full" dataset, the
"sampled" dataset, or "none" (default).</p></td>
    </tr>
    <tr>
      <th>scale</th>
      <td><p>logical; should the data be centered and scaled?</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>if we use "conventional" measures (default), then the mean and
standard deviation are used for centering and scaling, respectively. If
"robust" measures are specified, the median and median absolute deviation
(MAD) are used.</p></td>
    </tr>
    <tr>
      <th>min.var</th>
      <td><p>minimum variability measure threshold used to filter the
feature space for only highly variable features. Only features with a
minimum variability measure across all samples greater than <code>min.var</code>
will be used. If <code>type = "conventional"</code>, the standard deviation is
the measure used, and if <code>type = "robust"</code>, the MAD is the measure
used.</p></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>logical; should a progress bar be displayed?</p></td>
    </tr>
    <tr>
      <th>seed.nmf</th>
      <td><p>random seed to use for NMF-based algorithms</p></td>
    </tr>
    <tr>
      <th>seed.data</th>
      <td><p>seed to use to ensure each algorithm operates on the same
set of subsamples</p></td>
    </tr>
    <tr>
      <th>save</th>
      <td><p>logical; if <code>TRUE</code>, the returned object will be saved at
each iteration as well as at the end.</p></td>
    </tr>
    <tr>
      <th>file.name</th>
      <td><p>file name of the written object</p></td>
    </tr>
    <tr>
      <th>time.saved</th>
      <td><p>logical; if <code>TRUE</code>, the date saved is appended to the
file name. Only applicable when <code>dir</code> is not <code>NULL</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An array of dimension <code>nrow(x)</code> by <code>reps</code> by
  <code>length(algorithms)</code> by <code>length(nk)</code>. Each cube of the array
  represents a different k. Each slice of a cube is a matrix showing
  consensus clustering results for algorithms. The matrices have a row for
  each sample, and a column for each subsample. Each entry represents a class
  membership.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>See examples for how to use custom algorithms and distance functions. The
default clustering algorithms provided are:</p><ul>
<li><p>"nmf": Nonnegative Matrix Factorization using Kullback-Leibler
  Divergence</p></li>
<li><p>"nmfEucl": Nonnegative Matrix Factorization using Euclidean
  distance</p></li>
<li><p>"hc": Hierarchical Clustering</p></li>
<li><p>"diana": DIvisive ANAlysis Clustering</p></li>
<li><p>"km": K-Means Clustering</p></li>
<li><p>"pam": Partition Around Medoids</p></li>
<li><p>"ap": Affinity Propagation</p></li>
<li><p>"sc": Spectral Clustering using Radial-Basis kernel function</p></li>
<li><p>"gmm": Gaussian Mixture Model using Bayesian Information Criterion
  on EM algorithm</p></li>
<li><p>"block": Biclustering using a latent block model</p></li>
</ul>
    <p>The <code>nmf.method</code> defaults are "brunet" (Kullback-Leibler divergence) and
"lee" (Euclidean distance).</p>
<p>The progress bar increments for every unit of <code>reps</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>hgsc</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='no'>hgsc</span>[<span class='fl'>1</span>:<span class='fl'>100</span>, <span class='fl'>1</span>:<span class='fl'>50</span>]

<span class='co'># Custom distance function</span>
<span class='no'>manh</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) {
  <span class='kw'>stats</span><span class='kw'>::</span><span class='fu'>dist</span>(<span class='no'>x</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"manhattan"</span>)
}

<span class='co'># Custom clustering algorithm</span>
<span class='no'>agnes</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>d</span>, <span class='no'>k</span>) {
  <span class='fu'>return</span>(<span class='fu'>as.integer</span>(<span class='kw'>stats</span><span class='kw'>::</span><span class='fu'>cutree</span>(<span class='kw'>cluster</span><span class='kw'>::</span><span class='fu'>agnes</span>(<span class='no'>d</span>, <span class='kw'>diss</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>), <span class='no'>k</span>)))
}

<span class='fu'>assign</span>(<span class='st'>"agnes"</span>, <span class='no'>agnes</span>, <span class='fl'>1</span>)

<span class='no'>cc</span> <span class='kw'>&lt;-</span> <span class='fu'>consensus_cluster</span>(<span class='no'>dat</span>, <span class='kw'>reps</span> <span class='kw'>=</span> <span class='fl'>6</span>, <span class='kw'>algorithms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"pam"</span>, <span class='st'>"agnes"</span>),
<span class='kw'>distance</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"euclidean"</span>, <span class='st'>"manh"</span>), <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='fu'>str</span>(<span class='no'>cc</span>)</div><div class='output co'>#&gt;  int [1:100, 1:6, 1:4, 1:3] 1 1 2 1 2 1 1 NA 2 1 ...
#&gt;  - attr(*, "dimnames")=List of 4
#&gt;   ..$ : chr [1:100] "TCGA.04.1331_PRO.C5" "TCGA.04.1332_MES.C1" "TCGA.04.1336_DIF.C4" "TCGA.04.1337_MES.C1" ...
#&gt;   ..$ : chr [1:6] "R1" "R2" "R3" "R4" ...
#&gt;   ..$ : chr [1:4] "PAM_Euclidean" "PAM_Manh" "AGNES_Euclidean" "AGNES_Manh"
#&gt;   ..$ : chr [1:3] "2" "3" "4"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Derek Chiu, Aline Talhouk

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Derek Chiu, Aline Talhouk, Johnson Liu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
